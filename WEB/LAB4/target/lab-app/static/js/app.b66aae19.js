(()=>{"use strict";var t={35:(t,e,a)=>{var n={};a.r(n);var r=a(751),s=a(641);const i={id:"app"};function o(t,e,a,n,r,o){const l=(0,s.g2)("router-view");return(0,s.uX)(),(0,s.CE)("div",i,[(0,s.bF)(l)])}const l={name:"App"};var c=a(262);const d=(0,c.A)(l,[["render",o]]),u=d;var h=a(499),p=a(33);const v={class:"login-container"},k={class:"form-group"},f={class:"form-group"},b={key:0,class:"error"};function y(t,e,a,n,i,o){return(0,s.uX)(),(0,s.CE)("div",v,[e[6]||(e[6]=(0,s.Lk)("header",{class:"header"},[(0,s.Lk)("h1",null,"Иван Иванов"),(0,s.Lk)("p",null,"Группа: P3212, Вариант: 12345")],-1)),(0,s.Lk)("form",{onSubmit:e[2]||(e[2]=(0,r.D$)((...t)=>o.handleSubmit&&o.handleSubmit(...t),["prevent"])),class:"login-form"},[(0,s.Lk)("div",k,[e[3]||(e[3]=(0,s.Lk)("label",{for:"login"},"Логин:",-1)),(0,s.bo)((0,s.Lk)("input",{type:"text",id:"login","onUpdate:modelValue":e[0]||(e[0]=t=>i.credentials.login=t),required:""},null,512),[[r.Jo,i.credentials.login]])]),(0,s.Lk)("div",f,[e[4]||(e[4]=(0,s.Lk)("label",{for:"password"},"Пароль:",-1)),(0,s.bo)((0,s.Lk)("input",{type:"password",id:"password","onUpdate:modelValue":e[1]||(e[1]=t=>i.credentials.password=t),required:""},null,512),[[r.Jo,i.credentials.password]])]),e[5]||(e[5]=(0,s.Lk)("button",{type:"submit",class:"submit-btn"},"Войти",-1)),i.error?((0,s.uX)(),(0,s.CE)("p",b,(0,p.v_)(i.error),1)):(0,s.Q3)("",!0)],32)])}var g=a(505),m=a.n(g);const L=m().create({baseURL:"/lab-app/api"});L.interceptors.request.use(t=>{const e=localStorage.getItem("token");return e&&(t.headers.Authorization=`Bearer ${e}`),t});const w={data(){return{credentials:{login:"student",password:"password"},error:""}},methods:{async handleSubmit(){try{await n["default"].login(this.credentials.login,this.credentials.password),this.$router.push("/main")}catch(t){this.error="Неверный логин или пароль"}}}},C=(0,c.A)(w,[["render",y],["__scopeId","data-v-6af0a14b"]]),E=C,x={class:"main-container"},P={class:"controls"},_={class:"coordinate-group"},X={class:"button-group"},F=["onClick"],S={class:"coordinate-group"},O={key:0,class:"error"},R={class:"coordinate-group"},A={class:"button-group"},I=["onClick","disabled"],$=["disabled"],T={class:"results-table"};function j(t,e,a,n,i,o){const l=(0,s.g2)("ResponsiveCanvas");return(0,s.uX)(),(0,s.CE)("div",x,[e[7]||(e[7]=(0,s.Lk)("h1",null,"Проверка попадания точки",-1)),(0,s.Lk)("div",P,[(0,s.Lk)("div",_,[e[3]||(e[3]=(0,s.Lk)("label",null,"X:",-1)),(0,s.Lk)("div",X,[((0,s.uX)(),(0,s.CE)(s.FK,null,(0,s.pI)([-3,-2,-1,0,1,2,3,4,5],t=>(0,s.Lk)("button",{key:t,onClick:e=>o.setX(t),class:(0,p.C4)({active:i.x===t})},(0,p.v_)(t),11,F)),64))])]),(0,s.Lk)("div",S,[e[4]||(e[4]=(0,s.Lk)("label",null,"Y:",-1)),(0,s.bo)((0,s.Lk)("input",{type:"number",step:"0.1","onUpdate:modelValue":e[0]||(e[0]=t=>i.y=t),min:"-5",max:"3"},null,512),[[r.Jo,i.y]]),i.yError?((0,s.uX)(),(0,s.CE)("span",O,(0,p.v_)(i.yError),1)):(0,s.Q3)("",!0)]),(0,s.Lk)("div",R,[e[5]||(e[5]=(0,s.Lk)("label",null,"R:",-1)),(0,s.Lk)("div",A,[((0,s.uX)(),(0,s.CE)(s.FK,null,(0,s.pI)([-3,-2,-1,0,1,2,3,4,5],t=>(0,s.Lk)("button",{key:t,onClick:e=>o.setR(t),class:(0,p.C4)({active:i.r===t,disabled:t<=0}),disabled:t<=0},(0,p.v_)(t),11,I)),64))])]),(0,s.Lk)("button",{onClick:e[1]||(e[1]=(...t)=>o.checkPoint&&o.checkPoint(...t)),class:"check-btn",disabled:!o.isValid},"Проверить",8,$),(0,s.Lk)("button",{onClick:e[2]||(e[2]=(...t)=>o.logout&&o.logout(...t)),class:"logout-btn"},"Выйти")]),(0,s.bF)(l,{points:i.points,radius:i.r,onPointClicked:o.handleCanvasClick},null,8,["points","radius","onPointClicked"]),(0,s.Lk)("table",T,[e[6]||(e[6]=(0,s.Lk)("thead",null,[(0,s.Lk)("tr",null,[(0,s.Lk)("th",null,"X"),(0,s.Lk)("th",null,"Y"),(0,s.Lk)("th",null,"R"),(0,s.Lk)("th",null,"Результат"),(0,s.Lk)("th",null,"Время")])],-1)),(0,s.Lk)("tbody",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(i.points,(t,e)=>((0,s.uX)(),(0,s.CE)("tr",{key:e,class:(0,p.C4)({hit:t.hit,miss:!t.hit})},[(0,s.Lk)("td",null,(0,p.v_)(t.x.toFixed(1)),1),(0,s.Lk)("td",null,(0,p.v_)(t.y.toFixed(1)),1),(0,s.Lk)("td",null,(0,p.v_)(t.r),1),(0,s.Lk)("td",null,(0,p.v_)(t.hit?"Попадание":"Промах"),1),(0,s.Lk)("td",null,(0,p.v_)(o.formatDate(t.timestamp)),1)],2))),128))])])])}const M={class:"canvas-container"};function z(t,e,a,n,r,i){return(0,s.uX)(),(0,s.CE)("div",M,[(0,s.Lk)("canvas",{ref:"canvas",onClick:e[0]||(e[0]=(...t)=>i.handleCanvasClick&&i.handleCanvasClick(...t))},null,512)])}const V={props:{points:Array,radius:Number},mounted(){this.drawCanvas(),window.addEventListener("resize",this.handleResize)},beforeDestroy(){window.removeEventListener("resize",this.handleResize)},methods:{drawCanvas(){const t=this.$refs.canvas,e=t.getContext("2d");Math.min(t.width,t.height);e.clearRect(0,0,t.width,t.height),e.scale(t.width/200,t.height/200),this.drawGrid(e),this.drawArea(e,this.radius),this.points.forEach(t=>{e.fillStyle=t.hit?"green":"red",e.beginPath(),e.arc(t.canvasX,t.canvasY,3,0,2*Math.PI),e.fill()})},drawGrid(t){},drawArea(t,e){t.strokeStyle="#00f",t.beginPath(),t.arc(100,100,5*e,Math.PI,1.5*Math.PI),t.lineTo(100,100),t.closePath(),t.stroke(),t.beginPath(),t.moveTo(100,100),t.lineTo(100+2.5*e,100),t.lineTo(100,100-5*e),t.closePath(),t.stroke()},handleCanvasClick(t){const e=this.$refs.canvas,a=e.getBoundingClientRect(),n=t.clientX-a.left,r=t.clientY-a.top,s=n/e.width*200-100,i=100-r/e.height*200;this.$emit("point-clicked",{x:s,y:i})},handleResize(){this.$refs.canvas.width=this.$refs.canvas.clientWidth,this.$refs.canvas.height=this.$refs.canvas.clientHeight,this.drawCanvas()}},watch:{radius(){this.drawCanvas()},points(){this.drawCanvas()}}},Y=(0,c.A)(V,[["render",z],["__scopeId","data-v-0ffbcfcc"]]),q=Y,D={components:{ResponsiveCanvas:q},data(){return{x:0,y:0,r:1,points:[],yError:""}},computed:{isValid(){return this.r>0&&!this.yError&&this.y>=-5&&this.y<=3}},watch:{y(t){const e=parseFloat(t);isNaN(e)?this.yError="Введите число":this.yError=e<-5||e>3?"Y должен быть от -5 до 3":""}},async mounted(){await this.loadHistory()},methods:{setX(t){this.x=t},setR(t){t>0&&(this.r=t)},async checkPoint(){if(this.isValid)try{const t=await n["default"].checkHit(this.x,parseFloat(this.y),this.r);this.points.unshift(t.data)}catch(t){console.error("Ошибка проверки точки:",t)}},async handleCanvasClick({x:t,y:e}){this.x=parseFloat(t.toFixed(1)),this.y=parseFloat(e.toFixed(1)),this.checkPoint()},async loadHistory(){try{const t=await n["default"].getHistory();this.points=t.data.map(t=>({...t,canvasX:100+5*t.x,canvasY:100-5*t.y}))}catch(t){console.error("Ошибка загрузки истории:",t)}},async logout(){await n["default"].logout(),this.$router.push("/")},formatDate(t){const e=new Date(t);return e.toLocaleTimeString("ru-RU",{hour:"2-digit",minute:"2-digit",second:"2-digit"})}}},H=(0,c.A)(D,[["render",j],["__scopeId","data-v-287f592a"]]),U=H,J=[{path:"/",name:"Login",component:E},{path:"/main",name:"Main",component:U,meta:{requiresAuth:!0}}],K=(0,h.aE)({history:(0,h.LA)("/lab-app/"),routes:J});K.beforeEach((t,e,a)=>{const n=localStorage.getItem("token");t.meta.requiresAuth&&!n?a("/"):a()});const N=K,B=(0,r.Ef)(u);B.use(N),B.mount("#app")}},e={};function a(n){var r=e[n];if(void 0!==r)return r.exports;var s=e[n]={exports:{}};return t[n](s,s.exports,a),s.exports}a.m=t,(()=>{var t=[];a.O=(e,n,r,s)=>{if(!n){var i=1/0;for(d=0;d<t.length;d++){for(var[n,r,s]=t[d],o=!0,l=0;l<n.length;l++)(!1&s||i>=s)&&Object.keys(a.O).every(t=>a.O[t](n[l]))?n.splice(l--,1):(o=!1,s<i&&(i=s));if(o){t.splice(d--,1);var c=r();void 0!==c&&(e=c)}}return e}s=s||0;for(var d=t.length;d>0&&t[d-1][2]>s;d--)t[d]=t[d-1];t[d]=[n,r,s]}})(),(()=>{a.n=t=>{var e=t&&t.__esModule?()=>t["default"]:()=>t;return a.d(e,{a:e}),e}})(),(()=>{a.d=(t,e)=>{for(var n in e)a.o(e,n)&&!a.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})}})(),(()=>{a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()})(),(()=>{a.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e)})(),(()=>{a.r=t=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}})(),(()=>{var t={524:0};a.O.j=e=>0===t[e];var e=(e,n)=>{var r,s,[i,o,l]=n,c=0;if(i.some(e=>0!==t[e])){for(r in o)a.o(o,r)&&(a.m[r]=o[r]);if(l)var d=l(a)}for(e&&e(n);c<i.length;c++)s=i[c],a.o(t,s)&&t[s]&&t[s][0](),t[s]=0;return a.O(d)},n=self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))})();var n=a.O(void 0,[504],()=>a(35));n=a.O(n)})();
//# sourceMappingURL=app.b66aae19.js.map